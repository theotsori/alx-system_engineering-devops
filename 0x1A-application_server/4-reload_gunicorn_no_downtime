#!/usr/bin/env bash
# Get the PID of the Gunicorn process
pid=$(pgrep -f gunicorn)

# Send a SIGTTOU to the process to stop accepting new requests
kill -TTOU "$pid"

# Wait for the process to stop accepting new requests
sleep 1

# Send a SIGHUP to the process to reload the configuration
kill -HUP "$pid"

# Wait for the process to reload the configuration
sleep 1

# Send a SIGCONT to the process to start accepting new requests
kill -CONT "$pid"

# Check if the process is still running
if pgrep -f gunicorn > /dev/null; then
  echo "Gunicorn reloaded successfully"
else
  echo "Failed to reload Gunicorn"
fi
